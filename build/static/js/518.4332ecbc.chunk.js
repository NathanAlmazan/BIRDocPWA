"use strict";(self.webpackChunkbiranila=self.webpackChunkbiranila||[]).push([[518],{9518:function(e,n,i){i.r(n),i.d(n,{default:function(){return O},getFilteredOffices:function(){return k}});var t=i(4165),r=i(5861),o=i(4942),c=i(1413),s=i(9439),f=i(2791),a=i(7689),u=i(6934),l=i(6314),d=i(533),h=i(890),m=i(9164),Z=i(8584),x=i(3466),I=i(3400),g=i(3786),p=i(6151),v=i(4070),j=i(3746),N=i(165),b=i(6578),S=i(4376),w=i(9416),y=i(2872),C=i(647),L=i(184),W=(0,u.ZP)("div")((function(e){return{maxWidth:480,margin:"auto",display:"flex",minHeight:"100vh",flexDirection:"column",justifyContent:"center",padding:e.theme.spacing(12,0)}})),k=function(e,n){return 1===e?1===n:2===e?2===n:3===e||4===e?[11,12,13,14,15,16,17].includes(n):5!==e&&6!==e||[3,4,5,6,7,8,9,10].includes(n)};function O(){var e=(0,a.s0)(),n=(0,y.T)(),i=(0,b.a)(w.Zc).data,u=(0,b.a)(w.Qd).data,O=(0,S.D)(w.bc),q=(0,s.Z)(O,2),A=q[0],P=q[1],B=P.data,E=P.error,D=f.useState(),F=(0,s.Z)(D,2),R=F[0],H=F[1],M=f.useState(!0),Q=(0,s.Z)(M,2),T=Q[0],z=Q[1],G=f.useState(!1),J=(0,s.Z)(G,2),K=J[0],U=J[1],V=f.useState({firstName:"",lastName:"",officeId:1,sectionId:1,roleId:9,password:""}),X=(0,s.Z)(V,2),Y=X[0],$=X[1],_=Y.firstName,ee=Y.lastName,ne=Y.officeId,ie=Y.sectionId,te=Y.roleId,re=Y.password;f.useEffect((function(){if(i){var e=i.getAllBirOffices.find((function(e){return e.officeId===ne}));H(e),e&&[3,4,5,6].includes(te)?(z(!1),$((function(n){return(0,c.Z)((0,c.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})}))):e&&e.officeSections.length>1?(z(!0),$((function(n){return(0,c.Z)((0,c.Z)({},n),{},{sectionId:e.officeSections[1].sectionId})}))):e&&(z(!1),$((function(n){return(0,c.Z)((0,c.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})})))}}),[ne,i,te]),f.useEffect((function(){1===te?(z(!1),$((function(e){return(0,c.Z)((0,c.Z)({},e),{},{sectionId:1,officeId:1})}))):2===te?(z(!1),$((function(e){return(0,c.Z)((0,c.Z)({},e),{},{sectionId:2,officeId:2})}))):i&&$((function(e){return(0,c.Z)((0,c.Z)({},e),{},{officeId:i.getAllBirOffices.filter((function(e){return k(te,e.officeId)}))[0].officeId})}))}),[te,i]),f.useEffect((function(){B&&(n((0,C.x4)({uid:B.userLogin.accountId,username:B.userLogin.firstName+" "+B.userLogin.lastName,role:B.userLogin.role,office:{sectionId:B.userLogin.officeSection.sectionId,sectionName:B.userLogin.officeSection.sectionName,officers:[],sectionOffice:{officeId:B.userLogin.officeSection.sectionOffice.officeId,officeName:B.userLogin.officeSection.sectionOffice.officeName,officeSections:[]}}})),e("/app/dashboard"))}),[B,e,n]);var oe=function(e){$((0,c.Z)((0,c.Z)({},Y),{},(0,o.Z)({},e.target.name,e.target.value)))},ce=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,A({variables:{data:{firstName:_,lastName:ee,officeId:ie,password:re,roleId:te}}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,L.jsx)(m.Z,{maxWidth:"sm",children:(0,L.jsxs)(W,{children:[(0,L.jsxs)(l.Z,{sx:{mb:5},children:[(0,L.jsx)(h.Z,{variant:"h4",gutterBottom:!0,children:"Sign In"}),(0,L.jsx)(h.Z,{sx:{color:"text.secondary"},children:"Enter your credentials below."})]}),E&&(0,L.jsxs)(v.Z,{severity:"error",sx:{my:2},children:["".concat(E.message,". ")," ",(0,L.jsx)("a",{href:"/auth/reset",children:"Forgot Password?"})]}),(0,L.jsxs)(l.Z,{spacing:2,component:"form",onSubmit:ce,children:[(0,L.jsx)(Z.Z,{name:"firstName",label:"First Name",value:_,onChange:oe,fullWidth:!0,required:!0}),(0,L.jsx)(Z.Z,{name:"lastName",label:"Last Name",value:ee,onChange:oe,fullWidth:!0,required:!0}),u&&(0,L.jsx)(Z.Z,{name:"roleId",label:"Position",value:te,onChange:oe,fullWidth:!0,required:!0,select:!0,children:u.getAllRoles.map((function(e){return(0,L.jsx)(g.Z,{value:e.roleId,children:e.roleName},e.roleId)}))}),i&&(0,L.jsx)(Z.Z,{name:"officeId",label:"Office",value:ne,onChange:oe,fullWidth:!0,required:!0,select:!0,children:i.getAllBirOffices.filter((function(e){return k(te,e.officeId)})).map((function(e){return(0,L.jsx)(g.Z,{value:e.officeId,children:e.officeName},e.officeId)}))}),T&&R&&R.officeSections.length>1&&(0,L.jsx)(Z.Z,{name:"sectionId",label:"Section",value:ie,onChange:oe,fullWidth:!0,required:!0,select:!0,children:R.officeSections.filter((function(e){return"default"!==e.sectionName})).map((function(e){return(0,L.jsx)(g.Z,{value:e.sectionId,children:"default"===e.sectionName?"Main":e.sectionName},e.sectionId)}))}),(0,L.jsx)(Z.Z,{fullWidth:!0,type:K?"text":"password",label:"Password",name:"password",required:!0,value:re,onChange:oe,InputProps:{endAdornment:(0,L.jsx)(x.Z,{position:"end",children:(0,L.jsx)(I.Z,{onClick:function(){return U(!K)},edge:"end",children:K?(0,L.jsx)(N.Z,{}):(0,L.jsx)(j.Z,{})})})}}),(0,L.jsx)(p.Z,{type:"submit",variant:"contained",color:"secondary",fullWidth:!0,children:"Login"})]}),(0,L.jsx)(h.Z,{variant:"body2",align:"center",sx:{mt:3},children:(0,L.jsx)(d.Z,{variant:"subtitle2",onClick:function(){return e("/auth/register")},sx:{cursor:"pointer"},children:"Register Account"})})]})})}}}]);
//# sourceMappingURL=518.4332ecbc.chunk.js.map