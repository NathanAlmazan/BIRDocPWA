"use strict";(self.webpackChunkbiranila=self.webpackChunkbiranila||[]).push([[115],{115:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var r=n(9439),i=n(2791),o=n(1889),a=n(5527),c=n(493),s=n(6278),l=n(4721),d=n(9900),f=n(5021),u=n(890),h=n(4554),m=n(6151),Z=n(3400),x=n(3967),p=n(5901),v=n(2601),j=n(4165),b=n(5861),g=n(5574),C=n(7123),I=n(9157),y=n(5661),N=n(8584),w=n(6569),k=n(4376),S=n(9416),O=n(184);function R(e){var t=(0,k.D)(S.aZ),n=(0,r.Z)(t,2),o=n[0],a=n[1].loading,c=i.useState(""),s=(0,r.Z)(c,2),l=s[0],d=s[1],f=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(n){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,o({variables:{data:{officeName:l,officeSections:["default"]}}});case 3:d(""),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(w.y,{open:a}),(0,O.jsx)(g.Z,{open:e.open,onClose:e.onClose,maxWidth:"md",children:(0,O.jsxs)("form",{onSubmit:f,children:[(0,O.jsx)(y.Z,{children:"Add Office"}),(0,O.jsx)(I.Z,{children:(0,O.jsx)(N.Z,{autoFocus:!0,margin:"dense",name:"officeName",label:"Office Name",value:l,onChange:function(e){return d(e.target.value)},fullWidth:!0,variant:"standard",required:!0,sx:{width:400}})}),(0,O.jsxs)(C.Z,{children:[(0,O.jsx)(m.Z,{onClick:e.onClose,children:"Cancel"}),(0,O.jsx)(m.Z,{type:"submit",children:"Add"})]})]})})]})}var D=n(1691);function M(e){var t=(0,k.D)(S.ED),n=(0,r.Z)(t,1)[0],i=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({variables:{officeId:e.office.officeId}});case 2:e.onDelete(),e.onClose();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,O.jsxs)(g.Z,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,O.jsx)(y.Z,{id:"alert-dialog-title",children:e.office.officeSections.length>0?"Invalid Action":"Are you sure you want to delete ".concat(e.office.officeName,"?")}),(0,O.jsx)(I.Z,{children:(0,O.jsx)(D.Z,{id:"alert-dialog-description",children:e.office.officeSections.length>0?"You cannot delete this office because it has active sections.":"Please keep in mind that this action cannot be undone."})}),0===e.office.officeSections.length?(0,O.jsxs)(C.Z,{children:[(0,O.jsx)(m.Z,{onClick:e.onClose,children:"Cancel"}),(0,O.jsx)(m.Z,{color:"error",onClick:i,autoFocus:!0,children:"Delete"})]}):(0,O.jsx)(C.Z,{children:(0,O.jsx)(m.Z,{onClick:e.onClose,children:"Okay"})})]})}var P=n(6578),A=n(2872);function B(e){var t=(0,x.Z)(),n=(0,A.C)((function(e){return e.auth})).role,o=(0,P.a)(S.Zc),j=o.data,b=o.refetch,g=i.useState(!1),C=(0,r.Z)(g,2),I=C[0],y=C[1],N=i.useState(null),k=(0,r.Z)(N,2),D=k[0],B=k[1],H=function(){return y(!I)},z=function(){return b()};return j?(0,O.jsxs)(a.Z,{sx:{width:"100%",height:"100%"},children:[(0,O.jsxs)(h.Z,{sx:{p:2,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,O.jsx)(u.Z,{variant:"h6",children:"BIR Offices"}),n&&n.superuser&&(0,O.jsx)(m.Z,{variant:"contained",onClick:H,children:"Add Office"})]}),(0,O.jsx)(l.Z,{}),(0,O.jsxs)(c.Z,{sx:{width:"100%",maxHeight:"calc(100vh - 170px)",overflowY:"auto","::-webkit-scrollbar":{height:"8px",width:"8px"},"::-webkit-scrollbar-track":{background:t.palette.grey[300]},"::-webkit-scrollbar-thumb":{background:t.palette.secondary.dark},"::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.dark}},children:[0===j.getAllBirOffices.length&&(0,O.jsxs)(h.Z,{sx:{display:"flex",height:300,justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,O.jsx)(p.Z,{color:"secondary",sx:{fontSize:64,mb:1}}),(0,O.jsx)(u.Z,{variant:"subtitle1",children:"No Office Yet"}),(0,O.jsx)(u.Z,{variant:"body1",children:"Create an office"})]}),j.getAllBirOffices.map((function(t){return(0,O.jsxs)(f.ZP,{secondaryAction:n&&n.superuser&&(0,O.jsx)(Z.Z,{onClick:function(){return function(e){return B(e)}(t)},children:(0,O.jsx)(v.Z,{color:"error",fontSize:"small"})}),children:[(0,O.jsx)(s.Z,{alignItems:"flex-start",selected:t.officeId===e.selected,onClick:function(){return e.onSelect(t.officeId)},children:(0,O.jsx)(d.Z,{primary:(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(u.Z,{variant:"body1",children:t.officeName}),(0,O.jsx)(u.Z,{variant:"caption",gutterBottom:!0,children:"Sample Code"})]})})}),(0,O.jsx)(l.Z,{})]},t.officeId)}))]}),(0,O.jsx)(R,{open:I,onClose:H,onSubmit:z}),D&&(0,O.jsx)(M,{open:null!==D,office:D,onClose:function(){return B(null)},onDelete:z})]}):(0,O.jsx)(w.y,{open:!0})}var H=n(7621),z=n(9585),T=n(9504),q=n(653),W=n(3044),F=n(9608),Y=n(4942),E=n(1413),Q=n(6314),U=n(3786);function V(e){var t=(0,P.a)(S.Qd).data,n=(0,k.D)(S.f4),o=(0,r.Z)(n,1)[0],a=(0,k.D)(S.XS),c=(0,r.Z)(a,1)[0],s=(0,k.D)(S.HQ),l=(0,r.Z)(s,1)[0],d=i.useState({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,roleId:9,resetCode:null}),f=(0,r.Z)(d,2),h=f[0],x=f[1],p=h.firstName,C=h.lastName,w=h.roleId,R=h.resetCode,D=h.officeId,M=h.accountId;i.useEffect((function(){e.officer&&x({accountId:e.officer.accountId,firstName:e.officer.firstName,lastName:e.officer.lastName,officeId:e.section.sectionId,roleId:e.officer.role.roleId,resetCode:e.officer.resetCode})}),[e.officer,e.section]);var A=function(e){x((0,E.Z)((0,E.Z)({},h),{},(0,Y.Z)({},e.target.name,e.target.value)))},B=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(n){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,o({variables:{data:{firstName:p,lastName:C,officeId:D,roleId:w}}});case 3:x({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,roleId:9,resetCode:null}),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(n){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,c({variables:{data:{accountId:M,firstName:p,lastName:C,roleId:w}}});case 3:x({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,roleId:9,resetCode:null}),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l({variables:{accountId:M}});case 2:x({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,roleId:9,resetCode:null}),e.onSubmit(),e.onClose();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,O.jsxs)(g.Z,{open:e.open,onClose:e.onClose,maxWidth:"md",children:[(0,O.jsx)(y.Z,{children:(0,O.jsxs)(Q.Z,{direction:"row",justifyContent:"space-between",children:[(0,O.jsx)(u.Z,{variant:"h6",children:e.officer?"Update Officer":"Register Officer"}),e.officer&&(0,O.jsx)(Z.Z,{color:"error",onClick:z,children:(0,O.jsx)(v.Z,{})})]})}),(0,O.jsx)(I.Z,{children:(0,O.jsxs)(Q.Z,{component:"form",onSubmit:e.officer?H:B,spacing:3,sx:{width:500,mt:2},children:[(0,O.jsx)(N.Z,{name:"firstName",label:"First Name",value:p,onChange:A,required:!0}),(0,O.jsx)(N.Z,{name:"lastName",label:"Last Name",value:C,onChange:A,required:!0}),(0,O.jsx)(N.Z,{name:"Office",label:"Office",value:e.office.officeName,required:!0}),"default"!==e.section.sectionName&&(0,O.jsx)(N.Z,{name:"section",label:"Section",value:e.section.sectionName,required:!0}),t&&(0,O.jsx)(N.Z,{name:"roleId",label:"Position",value:w,onChange:A,fullWidth:!0,required:!0,select:!0,children:t.getAllRoles.map((function(e){return(0,O.jsx)(U.Z,{value:e.roleId,children:e.roleName},e.roleId)}))}),R&&(0,O.jsx)(N.Z,{name:"resetCode",label:"Reset Code",value:R}),(0,O.jsxs)(Q.Z,{spacing:1,children:[(0,O.jsx)(m.Z,{type:"submit",variant:"contained",fullWidth:!0,children:e.officer?"Update":"Register"}),(0,O.jsx)(m.Z,{variant:"outlined",onClick:e.onClose,fullWidth:!0,children:"Cancel"})]})]})})]})}var L=function(e,t,n,r){return!(!e||!t)&&(!!e.superuser||("Section Chief"===e.roleName&&t.sectionId===n||(("Revenue District Officer"===e.roleName||"Asst. Revenue District Officer"===e.roleName)&&t.sectionOffice.officeId===r||("Division Chief"===e.roleName||"Asst. Division Chief"===e.roleName)&&t.sectionOffice.officeId===r)))};function X(e){var t=(0,x.Z)(),n=(0,A.C)((function(e){return e.auth})),f=n.role,Z=n.office,p=(0,P.a)(S.pn,{variables:{officeId:e.officeId}}),v=p.data,j=p.loading,b=p.refetch,g=i.useState(null),C=(0,r.Z)(g,2),I=C[0],y=C[1],N=i.useState(null),k=(0,r.Z)(N,2),R=k[0],D=k[1];if(!v)return(0,O.jsx)(w.y,{open:j});return(0,O.jsxs)(a.Z,{sx:{width:"100%",height:"100%"},children:[(0,O.jsx)(h.Z,{sx:{p:2,display:"flex",flexDirection:"row",alignItems:"center"},children:(0,O.jsx)(u.Z,{variant:"h6",children:"".concat(v.getBirOfficeById.officeName," Sections")})}),(0,O.jsx)(l.Z,{}),(0,O.jsxs)(o.ZP,{container:!0,spacing:3,alignItems:"stretch",sx:{mt:1,px:2,pb:2,width:"100%",maxHeight:"calc(100vh - 170px)",overflowY:"auto","::-webkit-scrollbar":{height:"8px",width:"8px"},"::-webkit-scrollbar-track":{background:t.palette.grey[300]},"::-webkit-scrollbar-thumb":{background:t.palette.secondary.dark},"::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.dark}},children:[v.getBirOfficeById.officeSections.filter((function(e,t,n){return"default"!==e.sectionName||1===n.length})).map((function(e){return(0,O.jsx)(o.ZP,{item:!0,md:6,children:(0,O.jsxs)(H.Z,{sx:{width:"100%",height:"100%"},children:[L(f,Z,e.sectionId,e.sectionOffice.officeId)?(0,O.jsx)(z.Z,{title:"default"===e.sectionName?"Main":e.sectionName,action:(0,O.jsx)(m.Z,{variant:"contained",sx:{ml:2},onClick:function(){return y(e)},children:"Register"})}):(0,O.jsx)(z.Z,{title:"default"===e.sectionName?"Main":e.sectionName}),(0,O.jsxs)(T.Z,{children:[(0,O.jsx)(l.Z,{}),0===e.officers.length&&(0,O.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,O.jsx)(F.Z,{color:"secondary",sx:{fontSize:48,my:1}}),(0,O.jsx)(u.Z,{variant:"subtitle1",children:"No Officer Registered"}),L(f,Z,e.sectionId,e.sectionOffice.officeId)&&(0,O.jsx)(u.Z,{variant:"body1",children:"Click Register to Add Officers"})]}),(0,O.jsx)(c.Z,{children:e.officers.map((function(t){return(0,O.jsxs)(i.Fragment,{children:[(0,O.jsxs)(s.Z,{alignItems:"flex-start",onClick:L(f,Z,e.sectionId,e.sectionOffice.officeId)?function(){return function(e,t){y(t),D(e)}(t,e)}:void 0,children:[(0,O.jsx)(q.Z,{children:(0,O.jsx)(W.Z,{children:"".concat(t.firstName.charAt(0)).concat(t.lastName.charAt(0))})}),(0,O.jsx)(d.Z,{primary:(0,O.jsxs)(h.Z,{children:[(0,O.jsx)(u.Z,{variant:"body1",children:t.firstName+" "+t.lastName}),(0,O.jsx)(u.Z,{variant:"caption",gutterBottom:!0,children:t.role.roleName})]})})]}),(0,O.jsx)(l.Z,{variant:"inset",component:"li"})]},t.accountId)}))})]})]})},e.sectionId)})),I&&(0,O.jsx)(V,{open:null!==I,section:I,officer:R,office:v.getBirOfficeById,onClose:function(){y(null),D(null)},onSubmit:function(){return b({officeId:e.officeId})}})]})]})}function G(){var e=i.useState(1),t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,O.jsxs)(o.ZP,{container:!0,spacing:3,alignItems:"stretch",sx:{height:"95%"},children:[(0,O.jsx)(o.ZP,{item:!0,md:4,children:(0,O.jsx)(B,{selected:n,onSelect:function(e){return a(e)}})}),(0,O.jsx)(o.ZP,{item:!0,md:8,children:(0,O.jsx)(X,{officeId:n})})]})}},9608:function(e,t,n){var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm.05 10H4.77c.99-.5 2.7-1 4.23-1 .11 0 .23.01.34.01.34-.73.93-1.33 1.64-1.81-.73-.13-1.42-.2-1.98-.2-2.34 0-7 1.17-7 3.5V19h7v-1.5c0-.17.02-.34.05-.5zm7.45-2.5c-1.84 0-5.5 1.01-5.5 3V19h11v-1.5c0-1.99-3.66-3-5.5-3zm1.21-1.82c.76-.43 1.29-1.24 1.29-2.18C19 9.12 17.88 8 16.5 8S14 9.12 14 10.5c0 .94.53 1.75 1.29 2.18.36.2.77.32 1.21.32s.85-.12 1.21-.32z"}),"SupervisorAccountOutlined");t.Z=a},9504:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(7462),i=n(3366),o=n(2791),a=n(3733),c=n(4419),s=n(6934),l=n(1402),d=n(5878),f=n(1217);function u(e){return(0,f.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var h=n(184),m=["className","component"],Z=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),x=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCardContent"}),o=n.className,s=n.component,d=void 0===s?"div":s,f=(0,i.Z)(n,m),x=(0,r.Z)({},n,{component:d}),p=function(e){var t=e.classes;return(0,c.Z)({root:["root"]},u,t)}(x);return(0,h.jsx)(Z,(0,r.Z)({as:d,className:(0,a.Z)(p.root,o),ownerState:x,ref:t},f))}))},9585:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(4942),i=n(3366),o=n(7462),a=n(2791),c=n(3733),s=n(4419),l=n(890),d=n(1402),f=n(6934),u=n(5878),h=n(1217);function m(e){return(0,h.Z)("MuiCardHeader",e)}var Z=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),x=n(184),p=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var n;return(0,o.Z)((n={},(0,r.Z)(n,"& .".concat(Z.title),t.title),(0,r.Z)(n,"& .".concat(Z.subheader),t.subheader),n),t.root)}})({display:"flex",alignItems:"center",padding:16}),j=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),C=a.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiCardHeader"}),r=n.action,a=n.avatar,f=n.className,u=n.component,h=void 0===u?"div":u,Z=n.disableTypography,C=void 0!==Z&&Z,I=n.subheader,y=n.subheaderTypographyProps,N=n.title,w=n.titleTypographyProps,k=(0,i.Z)(n,p),S=(0,o.Z)({},n,{component:h,disableTypography:C}),O=function(e){var t=e.classes;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},m,t)}(S),R=N;null==R||R.type===l.Z||C||(R=(0,x.jsx)(l.Z,(0,o.Z)({variant:a?"body2":"h5",className:O.title,component:"span",display:"block"},w,{children:R})));var D=I;return null==D||D.type===l.Z||C||(D=(0,x.jsx)(l.Z,(0,o.Z)({variant:a?"body2":"body1",className:O.subheader,color:"text.secondary",component:"span",display:"block"},y,{children:D}))),(0,x.jsxs)(v,(0,o.Z)({className:(0,c.Z)(O.root,f),as:h,ref:t,ownerState:S},k,{children:[a&&(0,x.jsx)(j,{className:O.avatar,ownerState:S,children:a}),(0,x.jsxs)(g,{className:O.content,ownerState:S,children:[R,D]}),r&&(0,x.jsx)(b,{className:O.action,ownerState:S,children:r})]}))}))},7621:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(7462),i=n(3366),o=n(2791),a=n(3733),c=n(4419),s=n(6934),l=n(1402),d=n(5527),f=n(5878),u=n(1217);function h(e){return(0,u.Z)("MuiCard",e)}(0,f.Z)("MuiCard",["root"]);var m=n(184),Z=["className","raised"],x=(0,s.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),p=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCard"}),o=n.className,s=n.raised,d=void 0!==s&&s,f=(0,i.Z)(n,Z),u=(0,r.Z)({},n,{raised:d}),p=function(e){var t=e.classes;return(0,c.Z)({root:["root"]},h,t)}(u);return(0,m.jsx)(x,(0,r.Z)({className:(0,a.Z)(p.root,o),elevation:d?8:void 0,ref:t,ownerState:u},f))}))}}]);
//# sourceMappingURL=115.f90a2048.chunk.js.map