"use strict";(self.webpackChunkbiranila=self.webpackChunkbiranila||[]).push([[115],{115:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var r=n(9439),i=n(2791),o=n(1889),a=n(5527),s=n(493),c=n(6278),l=n(4721),d=n(9900),f=n(5021),u=n(890),h=n(4554),Z=n(6151),m=n(3400),x=n(3967),p=n(5901),v=n(2601),j=n(4165),b=n(5861),g=n(5574),C=n(7123),y=n(9157),N=n(5661),w=n(8584),I=n(6569),k=n(4376),S=n(9416),R=n(184);function O(e){var t=(0,k.D)(S.aZ),n=(0,r.Z)(t,2),o=n[0],a=n[1].loading,s=i.useState(""),c=(0,r.Z)(s,2),l=c[0],d=c[1],f=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(n){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,o({variables:{data:{officeName:l,officeSections:["default"]}}});case 3:d(""),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,R.jsxs)(i.Fragment,{children:[(0,R.jsx)(I.y,{open:a}),(0,R.jsx)(g.Z,{open:e.open,onClose:e.onClose,maxWidth:"md",children:(0,R.jsxs)("form",{onSubmit:f,children:[(0,R.jsx)(N.Z,{children:"Add Office"}),(0,R.jsx)(y.Z,{children:(0,R.jsx)(w.Z,{autoFocus:!0,margin:"dense",name:"officeName",label:"Office Name",value:l,onChange:function(e){return d(e.target.value)},fullWidth:!0,variant:"standard",required:!0,sx:{width:400}})}),(0,R.jsxs)(C.Z,{children:[(0,R.jsx)(Z.Z,{onClick:e.onClose,children:"Cancel"}),(0,R.jsx)(Z.Z,{type:"submit",children:"Add"})]})]})})]})}var P=n(1691);function M(e){var t=(0,k.D)(S.ED),n=(0,r.Z)(t,1)[0],i=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({variables:{officeId:e.office.officeId}});case 2:e.onDelete(),e.onClose();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,R.jsxs)(g.Z,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,R.jsx)(N.Z,{id:"alert-dialog-title",children:e.office.officeSections.length>0?"Invalid Action":"Are you sure you want to delete ".concat(e.office.officeName,"?")}),(0,R.jsx)(y.Z,{children:(0,R.jsx)(P.Z,{id:"alert-dialog-description",children:e.office.officeSections.length>0?"You cannot delete this office because it has active sections.":"Please keep in mind that this action cannot be undone."})}),0===e.office.officeSections.length?(0,R.jsxs)(C.Z,{children:[(0,R.jsx)(Z.Z,{onClick:e.onClose,children:"Cancel"}),(0,R.jsx)(Z.Z,{color:"error",onClick:i,autoFocus:!0,children:"Delete"})]}):(0,R.jsx)(C.Z,{children:(0,R.jsx)(Z.Z,{onClick:e.onClose,children:"Okay"})})]})}var D=n(6578);function A(e){var t=(0,x.Z)(),n=(0,D.a)(S.Zc),o=n.data,j=n.refetch,b=i.useState(!1),g=(0,r.Z)(b,2),C=g[0],y=g[1],N=i.useState(null),w=(0,r.Z)(N,2),k=w[0],P=w[1],A=function(){return y(!C)},B=function(){return j()};return o?(0,R.jsxs)(a.Z,{sx:{width:"100%",height:"100%"},children:[(0,R.jsxs)(h.Z,{sx:{p:2,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,R.jsx)(u.Z,{variant:"h6",children:"BIR Offices"}),(0,R.jsx)(Z.Z,{variant:"contained",onClick:A,children:"Add Office"})]}),(0,R.jsx)(l.Z,{}),(0,R.jsxs)(s.Z,{sx:{width:"100%",maxHeight:"calc(100vh - 170px)",overflowY:"auto","::-webkit-scrollbar":{height:"8px",width:"8px"},"::-webkit-scrollbar-track":{background:t.palette.grey[300]},"::-webkit-scrollbar-thumb":{background:t.palette.secondary.dark},"::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.dark}},children:[0===o.getAllBirOffices.length&&(0,R.jsxs)(h.Z,{sx:{display:"flex",height:300,justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,R.jsx)(p.Z,{color:"secondary",sx:{fontSize:64,mb:1}}),(0,R.jsx)(u.Z,{variant:"subtitle1",children:"No Office Yet"}),(0,R.jsx)(u.Z,{variant:"body1",children:"Create an office"})]}),o.getAllBirOffices.map((function(t){return(0,R.jsxs)(f.ZP,{secondaryAction:(0,R.jsx)(m.Z,{onClick:function(){return function(e){return P(e)}(t)},children:(0,R.jsx)(v.Z,{color:"error",fontSize:"small"})}),children:[(0,R.jsx)(c.Z,{alignItems:"flex-start",selected:t.officeId===e.selected,onClick:function(){return e.onSelect(t.officeId)},children:(0,R.jsx)(d.Z,{primary:(0,R.jsxs)(h.Z,{children:[(0,R.jsx)(u.Z,{variant:"body1",children:t.officeName}),(0,R.jsx)(u.Z,{variant:"caption",gutterBottom:!0,children:"Sample Code"})]})})}),(0,R.jsx)(l.Z,{})]},t.officeId)}))]}),(0,R.jsx)(O,{open:C,onClose:A,onSubmit:B}),k&&(0,R.jsx)(M,{open:null!==k,office:k,onClose:function(){return P(null)},onDelete:B})]}):(0,R.jsx)(I.y,{open:!0})}var B=n(7621),H=n(9585),z=n(9504),T=n(653),q=n(3044),F=n(9608),W=n(4942),Y=n(1413),E=n(6314);function U(e){var t=(0,k.D)(S.f4),n=(0,r.Z)(t,1)[0],o=(0,k.D)(S.XS),a=(0,r.Z)(o,1)[0],s=(0,k.D)(S.HQ),c=(0,r.Z)(s,1)[0],l=i.useState({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,position:"",resetCode:null}),d=(0,r.Z)(l,2),f=d[0],h=d[1],x=f.firstName,p=f.lastName,C=f.position,I=f.resetCode,O=f.officeId,P=f.accountId;i.useEffect((function(){e.officer&&h({accountId:e.officer.accountId,firstName:e.officer.firstName,lastName:e.officer.lastName,officeId:e.section.sectionId,position:e.officer.position,resetCode:e.officer.resetCode})}),[e.officer,e.section]);var M=function(e){h((0,Y.Z)((0,Y.Z)({},f),{},(0,W.Z)({},e.target.name,e.target.value)))},D=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(r){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,n({variables:{data:{firstName:x,lastName:p,officeId:O,position:C}}});case 3:h({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,position:"",resetCode:null}),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(n){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,a({variables:{data:{accountId:P,firstName:x,lastName:p,position:C}}});case 3:h({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,position:"",resetCode:null}),e.onSubmit(),e.onClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B=function(){var t=(0,b.Z)((0,j.Z)().mark((function t(){return(0,j.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({variables:{accountId:P}});case 2:h({accountId:"",firstName:"",lastName:"",officeId:e.section.sectionId,position:"",resetCode:null}),e.onSubmit(),e.onClose();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,R.jsxs)(g.Z,{open:e.open,onClose:e.onClose,maxWidth:"md",children:[(0,R.jsx)(N.Z,{children:(0,R.jsxs)(E.Z,{direction:"row",justifyContent:"space-between",children:[(0,R.jsx)(u.Z,{variant:"h6",children:e.officer?"Update Officer":"Register Officer"}),e.officer&&(0,R.jsx)(m.Z,{color:"error",onClick:B,children:(0,R.jsx)(v.Z,{})})]})}),(0,R.jsx)(y.Z,{children:(0,R.jsxs)(E.Z,{component:"form",onSubmit:e.officer?A:D,spacing:3,sx:{width:500,mt:2},children:[(0,R.jsx)(w.Z,{name:"firstName",label:"First Name",value:x,onChange:M,required:!0}),(0,R.jsx)(w.Z,{name:"lastName",label:"Last Name",value:p,onChange:M,required:!0}),(0,R.jsx)(w.Z,{name:"Office",label:"Office",value:e.office.officeName,required:!0}),"default"!==e.section.sectionName&&(0,R.jsx)(w.Z,{name:"section",label:"Section",value:e.section.sectionName,required:!0}),(0,R.jsx)(w.Z,{name:"position",label:"Position",value:C,onChange:M,required:!0}),I&&(0,R.jsx)(w.Z,{name:"resetCode",label:"Reset Code",value:I}),(0,R.jsxs)(E.Z,{spacing:1,children:[(0,R.jsx)(Z.Z,{type:"submit",variant:"contained",fullWidth:!0,children:e.officer?"Update":"Register"}),(0,R.jsx)(Z.Z,{variant:"outlined",onClick:e.onClose,fullWidth:!0,children:"Cancel"})]})]})})]})}function V(e){var t=(0,x.Z)(),n=(0,D.a)(S.pn,{variables:{officeId:e.officeId}}),f=n.data,m=n.loading,p=n.refetch,v=i.useState(null),j=(0,r.Z)(v,2),b=j[0],g=j[1],C=i.useState(null),y=(0,r.Z)(C,2),N=y[0],w=y[1];if(!f)return(0,R.jsx)(I.y,{open:m});return(0,R.jsxs)(a.Z,{sx:{width:"100%",height:"100%"},children:[(0,R.jsx)(h.Z,{sx:{p:2,display:"flex",flexDirection:"row",alignItems:"center"},children:(0,R.jsx)(u.Z,{variant:"h6",children:"".concat(f.getBirOfficeById.officeName," Sections")})}),(0,R.jsx)(l.Z,{}),(0,R.jsxs)(o.ZP,{container:!0,spacing:3,alignItems:"stretch",sx:{mt:1,px:2,pb:2,width:"100%",maxHeight:"calc(100vh - 170px)",overflowY:"auto","::-webkit-scrollbar":{height:"8px",width:"8px"},"::-webkit-scrollbar-track":{background:t.palette.grey[300]},"::-webkit-scrollbar-thumb":{background:t.palette.secondary.dark},"::-webkit-scrollbar-thumb:hover":{background:t.palette.primary.dark}},children:[f.getBirOfficeById.officeSections.filter((function(e,t,n){return"default"!==e.sectionName||1===n.length})).map((function(e){return(0,R.jsx)(o.ZP,{item:!0,md:6,children:(0,R.jsxs)(B.Z,{sx:{width:"100%",height:"100%"},children:[(0,R.jsx)(H.Z,{title:"default"===e.sectionName?"Main":e.sectionName,action:(0,R.jsx)(Z.Z,{variant:"contained",sx:{ml:2},onClick:function(){return g(e)},children:"Register"})}),(0,R.jsxs)(z.Z,{children:[(0,R.jsx)(l.Z,{}),0===e.officers.length&&(0,R.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,R.jsx)(F.Z,{color:"secondary",sx:{fontSize:48,my:1}}),(0,R.jsx)(u.Z,{variant:"subtitle1",children:"No Officer Registered"}),(0,R.jsx)(u.Z,{variant:"body1",children:"Click Register to Add Officers"})]}),(0,R.jsx)(s.Z,{children:e.officers.map((function(t){return(0,R.jsxs)(i.Fragment,{children:[(0,R.jsxs)(c.Z,{alignItems:"flex-start",onClick:function(){return function(e,t){g(t),w(e)}(t,e)},children:[(0,R.jsx)(T.Z,{children:(0,R.jsx)(q.Z,{children:"".concat(t.firstName.charAt(0)).concat(t.lastName.charAt(0))})}),(0,R.jsx)(d.Z,{primary:(0,R.jsxs)(h.Z,{children:[(0,R.jsx)(u.Z,{variant:"body1",children:t.firstName+" "+t.lastName}),(0,R.jsx)(u.Z,{variant:"caption",gutterBottom:!0,children:t.position})]})})]}),(0,R.jsx)(l.Z,{variant:"inset",component:"li"})]},t.accountId)}))})]})]})},e.sectionId)})),b&&(0,R.jsx)(U,{open:null!==b,section:b,officer:N,office:f.getBirOfficeById,onClose:function(){g(null),w(null)},onSubmit:function(){return p({officeId:e.officeId})}})]})]})}function L(){var e=i.useState(1),t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,R.jsxs)(o.ZP,{container:!0,spacing:3,alignItems:"stretch",sx:{height:"95%"},children:[(0,R.jsx)(o.ZP,{item:!0,md:4,children:(0,R.jsx)(A,{selected:n,onSelect:function(e){return a(e)}})}),(0,R.jsx)(o.ZP,{item:!0,md:8,children:(0,R.jsx)(V,{officeId:n})})]})}},9608:function(e,t,n){var r=n(4836);t.Z=void 0;var i=r(n(5649)),o=n(184),a=(0,i.default)((0,o.jsx)("path",{d:"M9 12c1.93 0 3.5-1.57 3.5-3.5S10.93 5 9 5 5.5 6.57 5.5 8.5 7.07 12 9 12zm0-5c.83 0 1.5.67 1.5 1.5S9.83 10 9 10s-1.5-.67-1.5-1.5S8.17 7 9 7zm.05 10H4.77c.99-.5 2.7-1 4.23-1 .11 0 .23.01.34.01.34-.73.93-1.33 1.64-1.81-.73-.13-1.42-.2-1.98-.2-2.34 0-7 1.17-7 3.5V19h7v-1.5c0-.17.02-.34.05-.5zm7.45-2.5c-1.84 0-5.5 1.01-5.5 3V19h11v-1.5c0-1.99-3.66-3-5.5-3zm1.21-1.82c.76-.43 1.29-1.24 1.29-2.18C19 9.12 17.88 8 16.5 8S14 9.12 14 10.5c0 .94.53 1.75 1.29 2.18.36.2.77.32 1.21.32s.85-.12 1.21-.32z"}),"SupervisorAccountOutlined");t.Z=a},9504:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(7462),i=n(3366),o=n(2791),a=n(3733),s=n(4419),c=n(6934),l=n(1402),d=n(5878),f=n(1217);function u(e){return(0,f.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var h=n(184),Z=["className","component"],m=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),x=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCardContent"}),o=n.className,c=n.component,d=void 0===c?"div":c,f=(0,i.Z)(n,Z),x=(0,r.Z)({},n,{component:d}),p=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},u,t)}(x);return(0,h.jsx)(m,(0,r.Z)({as:d,className:(0,a.Z)(p.root,o),ownerState:x,ref:t},f))}))},9585:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(4942),i=n(3366),o=n(7462),a=n(2791),s=n(3733),c=n(4419),l=n(890),d=n(1402),f=n(6934),u=n(5878),h=n(1217);function Z(e){return(0,h.Z)("MuiCardHeader",e)}var m=(0,u.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]),x=n(184),p=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var n;return(0,o.Z)((n={},(0,r.Z)(n,"& .".concat(m.title),t.title),(0,r.Z)(n,"& .".concat(m.subheader),t.subheader),n),t.root)}})({display:"flex",alignItems:"center",padding:16}),j=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,f.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),C=a.forwardRef((function(e,t){var n=(0,d.Z)({props:e,name:"MuiCardHeader"}),r=n.action,a=n.avatar,f=n.className,u=n.component,h=void 0===u?"div":u,m=n.disableTypography,C=void 0!==m&&m,y=n.subheader,N=n.subheaderTypographyProps,w=n.title,I=n.titleTypographyProps,k=(0,i.Z)(n,p),S=(0,o.Z)({},n,{component:h,disableTypography:C}),R=function(e){var t=e.classes;return(0,c.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},Z,t)}(S),O=w;null==O||O.type===l.Z||C||(O=(0,x.jsx)(l.Z,(0,o.Z)({variant:a?"body2":"h5",className:R.title,component:"span",display:"block"},I,{children:O})));var P=y;return null==P||P.type===l.Z||C||(P=(0,x.jsx)(l.Z,(0,o.Z)({variant:a?"body2":"body1",className:R.subheader,color:"text.secondary",component:"span",display:"block"},N,{children:P}))),(0,x.jsxs)(v,(0,o.Z)({className:(0,s.Z)(R.root,f),as:h,ref:t,ownerState:S},k,{children:[a&&(0,x.jsx)(j,{className:R.avatar,ownerState:S,children:a}),(0,x.jsxs)(g,{className:R.content,ownerState:S,children:[O,P]}),r&&(0,x.jsx)(b,{className:R.action,ownerState:S,children:r})]}))}))},7621:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(7462),i=n(3366),o=n(2791),a=n(3733),s=n(4419),c=n(6934),l=n(1402),d=n(5527),f=n(5878),u=n(1217);function h(e){return(0,u.Z)("MuiCard",e)}(0,f.Z)("MuiCard",["root"]);var Z=n(184),m=["className","raised"],x=(0,c.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),p=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCard"}),o=n.className,c=n.raised,d=void 0!==c&&c,f=(0,i.Z)(n,m),u=(0,r.Z)({},n,{raised:d}),p=function(e){var t=e.classes;return(0,s.Z)({root:["root"]},h,t)}(u);return(0,Z.jsx)(x,(0,r.Z)({className:(0,a.Z)(p.root,o),elevation:d?8:void 0,ref:t,ownerState:u},f))}))}}]);
//# sourceMappingURL=115.29033b0c.chunk.js.map