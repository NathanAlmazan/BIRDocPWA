"use strict";(self.webpackChunkbiranila=self.webpackChunkbiranila||[]).push([[497,518],{3497:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var i=t(4165),r=t(5861),o=t(4942),s=t(1413),c=t(9439),a=t(2791),f=t(7689),l=t(6934),u=t(6314),d=t(533),m=t(890),h=t(9164),Z=t(8584),x=t(3466),I=t(3400),p=t(3786),g=t(6151),v=t(4070),j=t(3746),N=t(165),b=t(6578),S=t(4376),C=t(9416),w=t(9518),y=t(184),W=(0,l.ZP)("div")((function(e){return{maxWidth:480,margin:"auto",display:"flex",flexDirection:"column",justifyContent:"center",padding:e.theme.spacing(12,0)}}));function k(){var e=(0,f.s0)(),n=(0,b.a)(C.Zc).data,t=(0,b.a)(C.Qd).data,l=(0,S.D)(C.pS),k=(0,c.Z)(l,2),O=k[0],P=k[1],q=P.data,L=P.error,A=a.useState(!1),B=(0,c.Z)(A,2),E=B[0],D=B[1],R=a.useState(!0),F=(0,c.Z)(R,2),M=F[0],Q=F[1],T=a.useState(),G=(0,c.Z)(T,2),H=G[0],z=G[1],J=a.useState({firstName:"",lastName:"",officeId:3,sectionId:3,password:"",roleId:9,resetCode:""}),K=(0,c.Z)(J,2),U=K[0],V=K[1],X=U.firstName,Y=U.lastName,$=U.officeId,_=U.sectionId,ee=U.roleId,ne=U.password,te=U.resetCode;a.useEffect((function(){if(n){var e=n.getAllBirOffices.find((function(e){return e.officeId===$}));z(e),e&&[3,4,5,6].includes(ee)?(Q(!1),V((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})}))):e&&e.officeSections.length>1?(Q(!0),V((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[1].sectionId})}))):e&&(Q(!1),V((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})})))}}),[$,n,ee]),a.useEffect((function(){1===ee?(Q(!1),V((function(e){return(0,s.Z)((0,s.Z)({},e),{},{sectionId:1,officeId:1})}))):2===ee?(Q(!1),V((function(e){return(0,s.Z)((0,s.Z)({},e),{},{sectionId:2,officeId:2})}))):n&&V((function(e){return(0,s.Z)((0,s.Z)({},e),{},{officeId:n.getAllBirOffices.filter((function(e){return(0,w.getFilteredOffices)(ee,e.officeId)}))[0].officeId})}))}),[ee,n]),a.useEffect((function(){q&&e("/auth/login")}),[q,e]);var ie=function(e){V((0,s.Z)((0,s.Z)({},U),{},(0,o.Z)({},e.target.name,e.target.value)))},re=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,O({variables:{data:{firstName:X,lastName:Y,officeId:_,roleId:ee,resetCode:te,password:ne}}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,y.jsx)(h.Z,{maxWidth:"sm",children:(0,y.jsxs)(W,{children:[(0,y.jsxs)(u.Z,{sx:{mb:2},children:[(0,y.jsx)(m.Z,{variant:"h4",gutterBottom:!0,children:"Reset Password"}),(0,y.jsx)(m.Z,{sx:{color:"text.secondary"},children:"Enter credentials below to reset password."})]}),L&&(0,y.jsx)(v.Z,{severity:"error",sx:{my:2},children:L.message}),(0,y.jsxs)(u.Z,{spacing:2,component:"form",onSubmit:re,children:[(0,y.jsx)(Z.Z,{name:"firstName",label:"First Name",value:X,onChange:ie,fullWidth:!0,required:!0}),(0,y.jsx)(Z.Z,{name:"lastName",label:"Last Name",value:Y,onChange:ie,fullWidth:!0,required:!0}),t&&(0,y.jsx)(Z.Z,{name:"roleId",label:"Position",value:ee,onChange:ie,fullWidth:!0,required:!0,select:!0,children:t.getAllRoles.map((function(e){return(0,y.jsx)(p.Z,{value:e.roleId,children:e.roleName},e.roleId)}))}),n&&(0,y.jsx)(Z.Z,{name:"officeId",label:"Office",value:$,onChange:ie,fullWidth:!0,required:!0,select:!0,children:n.getAllBirOffices.filter((function(e){return(0,w.getFilteredOffices)(ee,e.officeId)})).map((function(e){return(0,y.jsx)(p.Z,{value:e.officeId,children:e.officeName},e.officeId)}))}),M&&H&&H.officeSections.length>1&&(0,y.jsx)(Z.Z,{name:"sectionId",label:"Section",value:_,onChange:ie,fullWidth:!0,required:!0,select:!0,children:H.officeSections.filter((function(e){return"default"!==e.sectionName})).map((function(e){return(0,y.jsx)(p.Z,{value:e.sectionId,children:"default"===e.sectionName?"Main":e.sectionName},e.sectionId)}))}),(0,y.jsx)(Z.Z,{autoComplete:"off",name:"resetCode",label:"Reset Code",value:te,onChange:ie,fullWidth:!0,required:!0,helperText:"Please ask your Division Chief or System Admin for your Reset Code",inputProps:{min:6,max:6}}),(0,y.jsx)(Z.Z,{fullWidth:!0,type:E?"text":"password",label:"New Password",name:"password",required:!0,value:ne,onChange:ie,inputProps:{minLength:8},InputProps:{endAdornment:(0,y.jsx)(x.Z,{position:"end",children:(0,y.jsx)(I.Z,{onClick:function(){return D(!E)},edge:"end",children:E?(0,y.jsx)(N.Z,{}):(0,y.jsx)(j.Z,{})})})}}),(0,y.jsx)(g.Z,{type:"submit",variant:"contained",color:"secondary",fullWidth:!0,children:"Reset Password"})]}),(0,y.jsx)(m.Z,{variant:"body2",align:"center",sx:{mt:3},children:(0,y.jsx)(d.Z,{variant:"subtitle2",onClick:function(){return e("/auth/login")},sx:{cursor:"pointer"},children:"Go Back to Login"})})]})})}},9518:function(e,n,t){t.r(n),t.d(n,{default:function(){return P},getFilteredOffices:function(){return O}});var i=t(4165),r=t(5861),o=t(4942),s=t(1413),c=t(9439),a=t(2791),f=t(7689),l=t(6934),u=t(6314),d=t(533),m=t(890),h=t(9164),Z=t(8584),x=t(3466),I=t(3400),p=t(3786),g=t(6151),v=t(4070),j=t(3746),N=t(165),b=t(6578),S=t(4376),C=t(9416),w=t(2872),y=t(647),W=t(184),k=(0,l.ZP)("div")((function(e){return{maxWidth:480,margin:"auto",display:"flex",minHeight:"100vh",flexDirection:"column",justifyContent:"center",padding:e.theme.spacing(12,0)}})),O=function(e,n){return 1===e?1===n:2===e?2===n:3===e||4===e?[11,12,13,14,15,16,17].includes(n):5!==e&&6!==e||[3,4,5,6,7,8,9,10].includes(n)};function P(){var e=(0,f.s0)(),n=(0,w.T)(),t=(0,b.a)(C.Zc).data,l=(0,b.a)(C.Qd).data,P=(0,S.D)(C.bc),q=(0,c.Z)(P,2),L=q[0],A=q[1],B=A.data,E=A.error,D=a.useState(),R=(0,c.Z)(D,2),F=R[0],M=R[1],Q=a.useState(!0),T=(0,c.Z)(Q,2),G=T[0],H=T[1],z=a.useState(!1),J=(0,c.Z)(z,2),K=J[0],U=J[1],V=a.useState({firstName:"",lastName:"",officeId:1,sectionId:1,roleId:9,password:""}),X=(0,c.Z)(V,2),Y=X[0],$=X[1],_=Y.firstName,ee=Y.lastName,ne=Y.officeId,te=Y.sectionId,ie=Y.roleId,re=Y.password;a.useEffect((function(){if(t){var e=t.getAllBirOffices.find((function(e){return e.officeId===ne}));M(e),e&&[3,4,5,6].includes(ie)?(H(!1),$((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})}))):e&&e.officeSections.length>1?(H(!0),$((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[1].sectionId})}))):e&&(H(!1),$((function(n){return(0,s.Z)((0,s.Z)({},n),{},{sectionId:e.officeSections[0].sectionId})})))}}),[ne,t,ie]),a.useEffect((function(){1===ie?(H(!1),$((function(e){return(0,s.Z)((0,s.Z)({},e),{},{sectionId:1,officeId:1})}))):2===ie?(H(!1),$((function(e){return(0,s.Z)((0,s.Z)({},e),{},{sectionId:2,officeId:2})}))):t&&$((function(e){return(0,s.Z)((0,s.Z)({},e),{},{officeId:t.getAllBirOffices.filter((function(e){return O(ie,e.officeId)}))[0].officeId})}))}),[ie,t]),a.useEffect((function(){B&&(n((0,y.x4)({uid:B.userLogin.accountId,username:B.userLogin.firstName+" "+B.userLogin.lastName,role:B.userLogin.role,office:{sectionId:B.userLogin.officeSection.sectionId,sectionName:B.userLogin.officeSection.sectionName,officers:[],sectionOffice:{officeId:B.userLogin.officeSection.sectionOffice.officeId,officeName:B.userLogin.officeSection.sectionOffice.officeName,officeSections:[]}}})),e("/app/dashboard"))}),[B,e,n]);var oe=function(e){$((0,s.Z)((0,s.Z)({},Y),{},(0,o.Z)({},e.target.name,e.target.value)))},se=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,L({variables:{data:{firstName:_,lastName:ee,officeId:te,password:re,roleId:ie}}});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return(0,W.jsx)(h.Z,{maxWidth:"sm",children:(0,W.jsxs)(k,{children:[(0,W.jsxs)(u.Z,{sx:{mb:5},children:[(0,W.jsx)(m.Z,{variant:"h4",gutterBottom:!0,children:"Sign In"}),(0,W.jsx)(m.Z,{sx:{color:"text.secondary"},children:"Enter your credentials below."})]}),E&&(0,W.jsxs)(v.Z,{severity:"error",sx:{my:2},children:["".concat(E.message,". ")," ",(0,W.jsx)("a",{href:"/auth/reset",children:"Forgot Password?"})]}),(0,W.jsxs)(u.Z,{spacing:2,component:"form",onSubmit:se,children:[(0,W.jsx)(Z.Z,{name:"firstName",label:"First Name",value:_,onChange:oe,fullWidth:!0,required:!0}),(0,W.jsx)(Z.Z,{name:"lastName",label:"Last Name",value:ee,onChange:oe,fullWidth:!0,required:!0}),l&&(0,W.jsx)(Z.Z,{name:"roleId",label:"Position",value:ie,onChange:oe,fullWidth:!0,required:!0,select:!0,children:l.getAllRoles.map((function(e){return(0,W.jsx)(p.Z,{value:e.roleId,children:e.roleName},e.roleId)}))}),t&&(0,W.jsx)(Z.Z,{name:"officeId",label:"Office",value:ne,onChange:oe,fullWidth:!0,required:!0,select:!0,children:t.getAllBirOffices.filter((function(e){return O(ie,e.officeId)})).map((function(e){return(0,W.jsx)(p.Z,{value:e.officeId,children:e.officeName},e.officeId)}))}),G&&F&&F.officeSections.length>1&&(0,W.jsx)(Z.Z,{name:"sectionId",label:"Section",value:te,onChange:oe,fullWidth:!0,required:!0,select:!0,children:F.officeSections.filter((function(e){return"default"!==e.sectionName})).map((function(e){return(0,W.jsx)(p.Z,{value:e.sectionId,children:"default"===e.sectionName?"Main":e.sectionName},e.sectionId)}))}),(0,W.jsx)(Z.Z,{fullWidth:!0,type:K?"text":"password",label:"Password",name:"password",required:!0,value:re,onChange:oe,InputProps:{endAdornment:(0,W.jsx)(x.Z,{position:"end",children:(0,W.jsx)(I.Z,{onClick:function(){return U(!K)},edge:"end",children:K?(0,W.jsx)(N.Z,{}):(0,W.jsx)(j.Z,{})})})}}),(0,W.jsx)(g.Z,{type:"submit",variant:"contained",color:"secondary",fullWidth:!0,children:"Login"})]}),(0,W.jsx)(m.Z,{variant:"body2",align:"center",sx:{mt:3},children:(0,W.jsx)(d.Z,{variant:"subtitle2",onClick:function(){return e("/auth/register")},sx:{cursor:"pointer"},children:"Register Account"})})]})})}}}]);
//# sourceMappingURL=497.77e4941a.chunk.js.map